@using Milton.Controllers
@{
    ViewBag.Title = "Home";

}

@section contents{
    <link href="~/plugins/morris/morris.css" rel="stylesheet">
}

<div class="row">
    <div class="col-sm-12">
        <div class="page-title-box">
            <h4 class="page-title">Bop Report General</h4>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-lg-12">
        <label class="control-label col-sm-4">Seleccione el rango de fechas</label>
        <div class="col-sm-8">
            <div class="input-daterange input-group" id="date-range">
                <span class="input-group-addon bg-primary b-0 text-white">Del</span>
                <input type="text" class="form-control fromDate" name="start">
                <span class="input-group-addon bg-primary b-0 text-white">Al</span>
                <input type="text" class="form-control toDate" name="end">
            </div>
        </div>
        <input type="submit" class="btn btn-primary" value="Generar Reporte" id="ss_btn" style="float: right; margin-top: 1pc; margin-bottom: 1pc;" />
    </div>
</div>

<div class="row">
    <div class="col-sm-6 col-lg-3">
        <div class="widget-bg-color-icon card-box">
            <div class="bg-icon bg-icon-success pull-left">
                <i class="ti-eye text-success"></i>
            </div>
            <div class="text-right">
                <h3 class="text-dark" id="l1"></h3>
                <p class="text-muted">Activations</p>
            </div>
            <div class="clearfix"></div>
        </div>
    </div>
    <div class="col-sm-6 col-lg-3">
        <div class="widget-bg-color-icon card-box fadeInDown animated">
            <div class="bg-icon bg-icon-primary pull-left">
                <i class="ti-money text-info"></i>
            </div>
            <div class="text-right">
                <h3 class="text-dark" id="l2"></h3>
                <p class="text-muted">Cancellations</p>
            </div>
            <div class="clearfix"></div>
        </div>
    </div>

    <div class="col-sm-6 col-lg-3">
        <div class="widget-bg-color-icon card-box">
            <div class="bg-icon bg-icon-danger pull-left">
                <i class="ti-shopping-cart text-pink"></i>
            </div>
            <div class="text-right">
                <h3 class="text-dark" id="l3"></h3>
                <p class="text-muted">Subscribers</p>
            </div>
            <div class="clearfix"></div>
        </div>
    </div>

    <div class="col-sm-6 col-lg-3">
        <div class="widget-bg-color-icon card-box">
            <div class="bg-icon bg-icon-purple pull-left">
                <i class="ti-stats-up text-purple"></i>
            </div>
            <div class="text-right">
                <h3 class="text-dark"><b class="counter"></b></h3>
                <p class="text-muted">Charged</p>
            </div>
            <div class="clearfix"></div>
        </div>
    </div>
</div>
<!-- end row -->

<div class="row">
    <div class="col-md-4">
        <div class="card-box">
            <h4 class="text-dark  header-title m-t-0 m-b-30">Last 12 Months(Act, Canc, Subs)</h4>
            <div class="widget-chart text-center" id="l4">
                <div id="dashboard-chart-1" style="height: 200px;"></div>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card-box">
            <h4 class="text-dark  header-title m-t-0 m-b-30">Total Revenue BOPHelp</h4>
            <div class="widget-chart text-center">
                <div id="dashboard-chart-2" style="height: 200px;"></div>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card-box">
            <h4 class="text-dark  header-title m-t-0 m-b-30">Subscribers by Company</h4>
            <div class="widget-chart text-center">
                <div id="morris-donut-example" style="height: 200px;"></div>
            </div>
        </div>
    </div>
</div>
<!-- end row -->

<div class="row">
    <div class="col-lg-8">
        <div class="card-box">
            <h4 class="text-dark  header-title m-t-0">Latest Projects</h4>

            <div class="table-responsive">
                <table class="table">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Project Name</th>
                            <th>Start Date</th>
                            <th>Due Date</th>
                            <th>Status</th>
                            <th>Assign</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>
    <!-- end col -8 -->

</div>
<!-- end row -->

@section scripts{
    <!-- Counter Up  -->
    <script src="~/plugins/waypoints/lib/jquery.waypoints.js"></script>
    <script src="~/plugins/counterup/jquery.counterup.min.js"></script>

    <!--Morris Chart-->
    <script src="~/plugins/morris/morris.min.js"></script>
    <script src="~/plugins/raphael/raphael-min.js"></script>

    <!-- Page js  -->
    <script src="~/Scripts/pages/jquery.dashboard.js"></script>

    <!-- Custom main Js -->
    <script src="~/Scripts/jquery.core.js"></script>
    <script src="~/Scripts/jquery.app.js"></script>

    <script type="text/javascript">
        $(document).ready(
            function ($) {
                GetInfo();
                $('.counter').counterUp({
                    delay: 100,
                    time: 1200
                });
            });
        $('#date-range').datepicker({
            toggleActive: true,
            dateFormat: 'yyyy/MM/dd'
        });
        function GetInfo() {
            $.ajax({
                url: "/Home/acti?appId=BOP17_OI&initialDate=2018-04-01&endDate=2018-04-25",
                success: function (data) {
                    //debugger;
                    $("#l1").html("<b class='counter'>" + data.ActiveUsers + "</b>");
                },
                error: function (xhr) {
                    debugger;
                },
                type: "GET",
                dataType: 'json',
                contentType: "application/json; charset=utf-8"
            }),

                $.ajax({
                    url: "/Home/acti?appId=BOP17_OI&initialDate=2018-04-01&endDate=2018-04-25",
                    success: function (data) {
                        var o = 0;
                        for (i = 0; i < data.subcribe.length; i++) {
                            o += data.subcribe[i].Cantidad;
                        }
                        $("#l3").html("<b class='counter'>" + o + "</b>");
                    },
                    error: function (xhr) {
                        debugger;
                    },
                    type: "GET",
                    dataType: 'json',
                    contentType: "application/json; charset=utf-8"
                }),
             $.ajax({
                 url: "/Home/acti?appId=BOP17_OI&initialDate=2018-04-01&endDate=2018-04-25",
                 success: function (data) {
                     var o = 0;
                     for (i = 0; i < data.cancellation.length; i++) {
                         o += data.cancellation[i].Cantidad;
                     }

                     $("#l2").html("<b class='counter'>" + o + "</b>");
                 },
                 error: function (xhr) {
                     debugger;
                 },
                 type: "GET",
                 dataType: 'json',
                 contentType: "application/json; charset=utf-8"
             })


        };
        function chart() {
            $.ajax({
                url: "/Home/acti?appId=BOP17_OI&initialDate=2018-04-01&endDate=2018-04-25",
                success: function (data) {
                    var o = 0;
                    for (i = 0; i < data.cancellation.length; i++) {
                        o += data.cancellation[i].Cantidad;
                    }

                    $("#dashboard-chart-1").html("<b class='counter'>" + o + "</b>");
                },
                error: function (xhr) {
                    debugger;
                },
                type: "GET",
                dataType: 'json',
                contentType: "application/json; charset=utf-8"
            })
        }


        function dates() {

            var df = new Date($('.fromDate').val());
            var dt = new Date($('.toDate').val());
            var asdF = df.getFullYear() + '-' + (df.getMonth() + 1) + '-' + df.getDate();
            var asdT = dt.getFullYear() + '-' + (dt.getMonth() + 1) + '-' + dt.getDate();
        }

    </script>

}